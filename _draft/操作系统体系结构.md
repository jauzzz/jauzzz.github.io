---
title: 操作系统体系结构
tags: []
---



什么是计算机体系架构？

**研究计算机理论组成部分，设计与实现高性能的计算机.**



## 图灵机（计算机理论组成）

我们知道，计算机是一个提供*计算*和*存储*能力的机器，是对人计算过程的模拟，是计算模型的实践.

计算模型有很多种：

- [图灵机](https://zh.wikipedia.org/wiki/图灵机)
- [λ演算](https://zh.wikipedia.org/wiki/Λ演算)
- [寄存器](https://zh.wikipedia.org/wiki/寄存器机)
- [递归函数](https://zh.wikipedia.org/wiki/递归函数)



图灵机是其中一个理论模型，本质上是[状态机](https://zh.wikipedia.org/wiki/有限状态机).

图灵机的基本思想是模拟人类数学运算的过程，提取出以下两种动作：

1. 在纸上写或擦除某个符号
2. 把注意力从纸上的一个位置移动到另一个位置

![图灵机结构](https://tva1.sinaimg.cn/large/006y8mN6gy1g800q01y4kj30dw06a3yj.jpg)

根据这个模型，图灵设想了一台机器，由以下几部分组成：

- **无限长纸带**，纸带分成一个个的格子
- **读写头**，可以在纸带上移动，并且读写当前格子上的符号
- **规则表**，根据机器状态和当前格子上的符号确定下一步读写头的动作，并相应改变状态寄存器的值
- **状态寄存器**，用于保存当前机器的状态

这个机器的各部分都是有限的，但有一个无限长纸带，因此是一个理想设备.



## 冯诺依曼（计算机物理组成）

冯诺依曼体系架构，将图灵机用物理的手段有效的实现出来，包括`运算`、`控制`、`存储`、`输入`、`输出`五个部分.

该体系有两个核心思想：

- 使用**二进制**作为计算机数值计算的基础，以0、1代表数值
- **存储程序**，指令和数据都放在存储器，该设计提供了计算机快速切换规则（*可编程*）的能力，标志着自动运算的实现



根据冯诺依曼设计的计算机，必须具备五大基本组件：

- 运算器：逻辑运算和算术运算，数据传送
- 控制器：读取和执行指令（指令的内容包括存储器访问，算术逻辑运算和分支）
- 存储器：数据存放的地方
- 输入设备
- 输出设备

![img](https://tva1.sinaimg.cn/large/006y8mN6gy1g800q1cj07j30k00cp3yx.jpg)

至此，我们已经划分了一个计算机的几个经典部件；

**记住，这些部件都是电子元件，是物理存在的，会受到许许多多物理情况的制约.**

**计算机体系架构需要在制约中，作出妥协和折中，以追求最佳性能.**



## 存储

存储功能，应当包含以下几点：

- 数据（不同类型）如何存储在内存上
- 计算机如何读写内存上的数据
- 存储器层次结构



#### 数据（不同类型）如何存储在存储器上

不论什么类型的数据，都会有对应的二进制的表示方式.

计算机存储数据，就是存储0和1.

对应电气特性，就是`通电/未通电`.

[锁存器](https://baike.baidu.com/item/锁存器)是具有这种特性的一个典型电气元件.

给锁存器加入时钟信号，就得到基本触发器，可以通过时钟对输出进行控制，能够读写一个二进制码.

![img](https://tva1.sinaimg.cn/large/006y8mN6gy1g800q0gzr9g306404hmzt.gif)



计算机的内存是由众多的存储单元线性相连，组成的一个大的存储单元集合体.

存储单元是由触发器组成的，具有唯一地址，大小是 ，一个比特对应存储的一个 0/1

![img](https://tva1.sinaimg.cn/large/006y8mN6gy1g800q0y7noj30dp03vt8y.jpg)



#### 计算机如何读写存储器上的数据

首先要明白一点，计算机的数据处理中心是 CPU，所以计算机读写存储器就是 CPU 读写存储器.

CPU 与存储器是独立的两个物理部件，需要相互连接才能进行通信，完成该功能的部件叫`总线`



**计算机的寻址范围由地址总线的宽度决定，寻址能力由 CPU 提供.**

通过地址总线，CPU 可以通过 `addressM/地址总线` 传递内存地址来访问对应的存储单元.

![计算机架构图](https://tva1.sinaimg.cn/large/006y8mN6gy1g800q1u3f9j30fw0a7glt.jpg)

而内存地址与对应存储单元地址的转换，是通过`存储器编址方案`确定的.

通常，有以下两种方案：

- 按字节编址 (`1 byte = 8 bit`)
- 按字编址（字是具有长度为字长的存储单元，如果字长是32位，表明一个字有32 bit）



#### 存储器层次结构

我们希望存储器具有以下特点：

- 速度快
- 容量大
- 便宜

而现实中，速度快的存储器件容量小，容量大的存储器件速度慢，便宜的存储器件速度和容量都越差



数据访问的方式，具有以下两个局部性：

- 时间局部性：如果某个数据项被访问，那么不久的将来可能再次被访问
- 空间局部性：如果某个数据项被访问，那么相邻的数据项可能也将被访问



于是，设计出了一个存储器层次结构：

<img src="https://tva1.sinaimg.cn/large/006y8mN6gy1g800ja357fj30sa0hsgxq.jpg" width="70%">



在这个结构中，数据访问顺序是从上至下；

只要让数据尽可能的在上层被访问，就能提供出速度快、容量大、便宜的存储器.

当数据在上层的访问 miss 时，就会将相应的块从低层存储器置换到高层存储器，称为`内存置换`，该功能交由操作系统负责.



## 计算

计算功能，应当包含以下几点：

- 基本计算能力（加减乘除）是如何提供的
- 基本控制逻辑（分支和循环）是如何提供的
- 运算能力的度量标准和优化（流水线、并行、预测）



## 应用程序是如何在计算机中运行的



## Reference